---
description: Complete ticket workflow with multi-agent tracking
alwaysApply: false
---

# Ticket Workflow with Agent Tracking

Invoke with: *"start working on CNV-XXX"*, *Jira ticket URL*, *"ticket workflow"*

This workflow defines how to execute a complete Jira ticket from analysis to PR using agent tracking.

---

## 1. Workflow Steps

When a ticket URL is received, execute immediately:

1. **Fetch and analyze the ticket** - Understand requirements
2. **Create todos with agent tracking** - Show both agents and tasks
3. **Run Developer Agent first** - Implement the fix/feature
4. **Run remaining review agents** - UX, QE, Security, KubeVirt Expert
5. **Ask to implement recommendations** - After each review phase

---

## 2. Todo Structure

Use the TodoWrite tool to create structured tracking:

```
Todos:
- id: "dev-agent", content: "ğŸ§‘â€ğŸ’» Developer Agent", status: "in_progress"
- id: "dev-1", content: "  â””â”€ Analyze issue and find root cause", status: "in_progress"
- id: "dev-2", content: "  â””â”€ Implement fix", status: "pending"
- id: "dev-3", content: "  â””â”€ Run quality checks", status: "pending"
- id: "ux-agent", content: "ğŸ¨ UX Agent", status: "pending"
- id: "ux-1", content: "  â””â”€ Review accessibility", status: "pending"
- id: "ux-2", content: "  â””â”€ Check UI states", status: "pending"
- id: "qe-agent", content: "ğŸ§ª QE Agent", status: "pending"
- id: "qe-1", content: "  â””â”€ Identify edge cases", status: "pending"
- id: "qe-2", content: "  â””â”€ Suggest tests", status: "pending"
- id: "security-agent", content: "ğŸ”’ Security Agent", status: "pending"
- id: "security-1", content: "  â””â”€ Review security", status: "pending"
- id: "kubevirt-agent", content: "ğŸ¯ KubeVirt Expert", status: "pending"
- id: "kubevirt-1", content: "  â””â”€ Validate K8s patterns", status: "pending"
```

---

## 3. Agent Execution

### Developer Agent (first - does implementation)
- Update todo: `dev-agent` â†’ in_progress
- Analyze, implement, test
- Update todos as subtasks complete
- Mark `dev-agent` â†’ completed

### Review Agents (after implementation)
For each review agent (UX, QE, Security, KubeVirt):
1. Update agent todo â†’ in_progress
2. Run the agent review
3. Present findings with severity
4. Ask: "Implement these recommendations? [Yes/Skip]"
5. If Yes: implement and update subtask todos
6. Mark agent todo â†’ completed
7. Move to next agent

---

## 4. Post-Agent Prompt

After each agent completes its review, ask:

```
[Agent Name] found:
ğŸ”´ X blockers | ğŸŸ¡ Y suggestions | ğŸŸ¢ Z nitpicks

Implement these recommendations?
1. âœ… Yes, implement now
2. â­ï¸ Skip, continue to next agent
3. ğŸ›‘ Stop here
```

---

## 5. Final Summary

After all agents complete:

```
## CNV-XXXXX Complete!

âœ… Developer: [summary of implementation]
âœ… UX: [summary of UX changes]
âœ… QE: [summary of test additions]
âœ… Security: [summary of findings]
âœ… KubeVirt: [summary of validation]

Ready for PR? [Yes/Review changes first]
```

---

## 6. Example Flow

```
User: https://issues.redhat.com/browse/CNV-78624

AI: Starting work on CNV-78624...

[Creates todos with all agents]
[Developer Agent runs, finds root cause, implements fix]
[Updates todos as subtasks complete]

Developer Agent complete! Moving to UX Agent...

ğŸ¨ UX Agent found:
ğŸ”´ 0 blockers | ğŸŸ¡ 1 suggestion | ğŸŸ¢ 0 nitpicks

Implement this recommendation?
1. âœ… Yes
2. â­ï¸ Skip

User: 1

[Implements, continues through remaining agents...]

All agents complete! Ready for PR.
```
